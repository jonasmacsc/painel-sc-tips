<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SC Tips ‚Ä¢ N√∫meros Puxadores ‚Äî Live</title>
<link rel="icon" type="image/png" href="./favicon.png" />
<style>
  :root{--bg:#071018;--panel:#0b1220;--text:#e7f1ff;--mut:#9ab6e6;--ok:#10b981;--warn:#eab308;--red:#ef4444;--brand:#22d3ee;}
  *{box-sizing:border-box} html,body{margin:0;background:var(--bg);color:var(--text);font:16px/1.45 "Inter",system-ui,Segoe UI,Roboto,Arial}
  .wrap{max-width:1200px;margin:0 auto;padding:18px}
  .nav{position:sticky;top:0;z-index:10;background:rgba(7,16,24,.95);border-bottom:1px solid rgba(255,255,255,.08)}
  .nav .inner{display:flex;gap:12px;align-items:center;justify-content:space-between;padding:12px 18px}
  .brand{display:flex;align-items:center;gap:10px;font-weight:800}
  .brand img{height:26px}
  .brand b{color:var(--brand)}
  .menu{display:flex;gap:10px}
  .menu a{color:#cfe0ff;text-decoration:none;padding:8px 12px;border:1px solid rgba(255,255,255,.12);border-radius:10px}
  .menu a:hover{background:rgba(255,255,255,.06)}
  .menu a.active{background:linear-gradient(135deg,#38bdf8,#22d3ee);color:#04222a;border-color:transparent}
  .panel{background:var(--panel);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px;margin-top:14px}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .badge{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border:1px solid rgba(255,255,255,.15);border-radius:999px;color:#cfe8ff}
  .bubble{width:34px;height:34px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:700;border:1px solid rgba(255,255,255,.1)}
  .r{background:#7a1d1d}.b{background:#101925}.g{background:#0b3a1f}
  select,button{background:#0c1426;border:1px solid rgba(255,255,255,.15);color:#fff;border-radius:10px;padding:8px 10px}
  button.primary{background:#2563eb;border-color:#2563eb}
</style>
</head>
<body>
  <!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark">
  <div class="container">
    <a class="navbar-brand" href="index.html">
      <img src="logo.png" alt="SC Tips Logo" style="height:32px;vertical-align:middle">
      SC TIPS <b>VIP</b>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navMenu">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="estrategias.html">Estrat√©gias</a></li>
        <li class="nav-item"><a class="nav-link" href="matrix-premium.html">Matrix Premium</a></li>
        <li class="nav-item"><a class="nav-link" href="puxadores.html">Puxadores Live</a></li>
        <li class="nav-item"><a class="nav-link" href="contatos.html">Contatos</a></li>
      </ul>
    </div>
  </div>
</nav>

  <div class="wrap">
    <div class="panel">
      <h2 style="margin:0 0 10px 0">üõ∞Ô∏è N√∫meros Puxadores ‚Äî Live</h2>
      <div class="row">
        <span class="badge" id="live">standby</span>
        <span class="badge">origem: <b id="origem" style="margin-left:6px">‚Äî</b></span>
        <span class="badge">mesa: <b id="mesa" style="margin-left:6px">‚Äî</b></span>
        <span class="badge">√∫ltima: <b id="ago" style="margin-left:6px">‚Äî</b></span>
      </div>

      <div class="row" style="margin-top:12px">
        <div class="badge" style="font-size:18px">√öltimo: <b id="last" style="font-size:22px;margin-left:8px">--</b></div>
        <label class="badge">Base:
          <select id="selBase" style="margin-left:6px"></select>
        </label>
        <label class="badge">Vizinhos:
          <select id="selViz" style="margin-left:6px"><option>1</option><option selected>2</option><option>3</option></select>
        </label>
        <button class="primary" id="btnSim">üé≤ Simular n¬∫</button>
        <button id="btnIns">‚ö° Inserir aleat√≥rio</button>
        <button id="btnClr">üßπ Limpar</button>
      </div>
    </div>

    <div class="panel">
      <div class="row" style="justify-content:space-between">
        <div><b>Puxadores da Base:</b> <span id="pux"></span></div>
        <div><b>Ativos:</b> <span id="act">0</span></div>
      </div>
      <div id="sinais" style="margin-top:10px"></div>
    </div>

    <div class="panel">
      <h3 style="margin:0 0 8px 0">Hist√≥rico (√∫ltimos 36)</h3>
      <div id="hist" class="row" style="flex-wrap:wrap"></div>
    </div>
  </div>

<script>
(()=>{
// roda e util
const red=new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);
const wheel=[0,32,15,19,4,21,2,25,17,34,6,27,13,36,11,30,8,23,10,5,24,16,33,1,20,14,31,9,22,18,29,7,28,12,35,3,26];
const inRange=n=>Number.isInteger(n)&&n>=0&&n<=36;
const col=n=> n===0?'g':(red.has(n)?'r':'b');
function neighbors(n,k){const i=wheel.indexOf(n);if(i<0)return[];const out=[];for(let d=-k;d<=k;d++)out.push(wheel[(i+d+wheel.length)%wheel.length]);return[...new Set(out)];}

// mapa b√°sico de puxadores
const PULLERS={0:[10,20,30],1:[17,7],2:[2,22],3:[3,33],4:[21,9],5:[25,15,35],6:[20,17,7],
7:[7,17,20],8:[30,0,20],9:[9,19],10:[0,20,30],11:[30,0,20],12:[33,15],13:[20,7],14:[17,7],
15:[9,5,35],16:[3,33],17:[17,20,7],18:[2,22],19:[19,9],20:[17,7],21:[2,22],22:[2,22],
23:[0,10],24:[35,15,25],25:[20,22],26:[0,10,30],27:[17,7,20],28:[7,17,20],29:[7,17,20],
30:[0,20,30],31:[9,19],32:[0,10,20,30],33:[3,33],34:[7,20],35:[3,33,15],36:[20,30]};

// estado
const st={live:false,lastAt:0,origem:'‚Äî',mesa:'‚Äî',hist:[],base:17,viz:2,sinais:[]};

// UI els
const $=id=>document.getElementById(id);

// init selects
(function(){ const s=$('selBase'); for(let i=0;i<=36;i++){ const o=document.createElement('option'); o.value=i; o.textContent='N¬∫ '+i; if(i===17)o.selected=true; s.appendChild(o);} })();

$('selBase').onchange=e=>{ st.base=parseInt(e.target.value); renderPux(); };
$('selViz').onchange=e=>{ st.viz=parseInt(e.target.value); };
$('btnClr').onclick=()=>{ st.hist=[]; st.sinais=[]; st.lastAt=0; renderAll(); };
$('btnSim').onclick=()=> pushNumber(Math.floor(Math.random()*37),'SIM');
$('btnIns').onclick=()=> pushNumber(Math.floor(Math.random()*37),'MANUAL');

function renderPux(){ $('pux').textContent=(PULLERS[st.base]||[]).join(', ')||'‚Äî'; }
function timeAgo(){ if(!st.lastAt) return '‚Äî'; const s=Math.round((Date.now()-st.lastAt)/1000); return s+'s'; }

function renderAll(){
  $('last').textContent=inRange(st.hist[0]?.n)?st.hist[0].n:'--';
  $('ago').textContent=timeAgo();
  $('live').textContent=st.live?'LIVE':'standby';
  $('live').style.background=st.live?'#0b3a1f':'#1f2430';
  renderPux();
  const h=$('hist'); h.innerHTML=''; st.hist.slice(0,36).forEach(x=>{
    const d=document.createElement('div'); d.className='bubble '+col(x.n); d.textContent=x.n; d.title=x.src; h.appendChild(d);
  });
  $('act').textContent=st.sinais.filter(s=>s.active).length;
  const box=$('sinais'); box.innerHTML='';
  st.sinais.filter(s=>s.active).forEach(s=>{
    const div=document.createElement('div'); div.className='badge'; div.style.margin='6px 6px 0 0';
    div.textContent=`Base ${s.base} ‚Ä¢ ${s.neighbors} viz ‚Ä¢ vig ${s.ticks} spins`; box.appendChild(div);
  });
}

function processSignals(n){
  const pull=PULLERS[st.base]||[]; const isTrigger = n===st.base || pull.includes(n);
  st.sinais=st.sinais.map(s=> s.active? {...s,ticks:(s.ticks||0)+1} : s).filter(s=> s.active && (s.ticks||0)<=18);
  for(const s of st.sinais){
    const hit = n===s.base || neighbors(s.base,s.neighbors).includes(n);
    if(hit){ s.active=false; s.win=true; s.closedAt=Date.now(); }
  }
  if(isTrigger){
    const recent=st.hist.slice(0,12).map(x=>x.n);
    const neigh=new Set(neighbors(st.base,st.viz));
    const respeitou=recent.some(x=> x===st.base || neigh.has(x));
    if(!respeitou){
      st.sinais.push({id:Date.now()+Math.random(),base:st.base,neighbors:st.viz,active:true,ticks:0});
    }
  }
}

function pushNumber(n,src='LIVE'){
  if(!inRange(n)) return;
  st.hist.unshift({n,src}); st.lastAt=Date.now(); st.live = (src==='LIVE');
  processSignals(n); renderAll();
}

// BroadcastChannel
try{
  const bc=new BroadcastChannel('sc-tips-live');
  bc.onmessage=(ev)=>{ const p=ev.data||{}; if(typeof p.number==='number'){ st.origem=(p.platform||'LIVE').toUpperCase(); if(p.table) st.mesa=String(p.table); pushNumber(p.number,'LIVE'); } };
}catch{}

renderAll();
})();
</script>
</body>
</html>
