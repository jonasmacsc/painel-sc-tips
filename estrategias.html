<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‚ö° Matrix Premium ‚Äî SC TIPS</title>
  <meta name="theme-color" content="#0b1220">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16.png">
  <link rel="manifest" href="assets/favicon/site.webmanifest">
  <style>
    :root{
      --bg:#0a0b0f; --panel:#0e1525; --panel2:#101319;
      --ink:#e7f3ff; --muted:#93c5fd;
      --gold:#f4d063; --blue:#22d3ee;
      --ok:#2bbf6a; --err:#e15a5a; --warn:#f1c40f;
      --stroke:#1e2a44;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:var(--bg);color:var(--ink);font:16px/1.5 system-ui,Segoe UI,Inter,sans-serif}
    a{color:var(--blue);text-decoration:none}
    .wrap{max-width:1200px;margin:0 auto;padding:20px}
<nav>
  <div class="row">
    <a class="brand" href="index.html" title="SC TIPS ‚Ä¢ Home">
      <video src="assets/media/logo-animated.mp4" autoplay muted loop playsinline poster="assets/img/branding/logo-static.png"></video>
      <span><b>SC TIPS</b><small>FASCOR ‚Ä¢ VIP</small></span>
    </a>
    <div class="menu" id="mainMenu">
      <!-- ‚úÖ HREFs corrretos -->
      <a href="index.html" data-page="home">Home</a>
      <a href="estrategias.html" data-page="estrategias">Estrat√©gias</a>
      <a href="matrix-premium.html" data-page="matrix">Matrix Premium</a>
      <a href="puxadores.html" data-page="puxadores">Puxadores Live</a>
      <a href="contato.html" data-page="contato">Contato</a>
    </div>
  </div>
</nav>
    /* NAVBAR */
    nav{background:#0e1525;border-bottom:1px solid var(--stroke);position:sticky;top:0;z-index:10}
    nav .row{display:flex;align-items:center;justify-content:space-between;padding:12px 18px}
    .brand{display:flex;align-items:center;gap:10px}
    .brand video,.brand img{width:42px;height:42px;border-radius:8px;object-fit:cover;background:#000}
    .brand span{display:flex;flex-direction:column;line-height:1}
    .brand b{color:#fff;font-weight:800;letter-spacing:.3px}
    .brand small{background:#0b1220;border:1px solid var(--stroke);padding:2px 8px;border-radius:999px;color:#22d3ee;width:max-content}
    .menu{display:flex;gap:8px;flex-wrap:wrap}
    .menu a{padding:8px 14px;border-radius:10px;color:#cfe0ff}
    .menu a:hover{background:rgba(255,255,255,.07)}
    .menu a.active{background:linear-gradient(135deg,#22d3ee,#60a5fa);color:#001428;font-weight:700}

    h1{font-size:28px;margin:16px 0;font-weight:900}
    h2{font-size:18px;margin:8px 0 12px;color:var(--muted);font-weight:700}
    h3{margin:14px 0;font-weight:700;color:var(--gold)}

    .grid{display:grid;gap:16px}
    @media(min-width:960px){.grid{grid-template-columns:1.2fr 1fr 1fr}}

    .card{background:var(--panel2);border:1px solid var(--stroke);padding:14px;border-radius:14px}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .btn{padding:10px 14px;border-radius:10px;border:1px solid var(--stroke);background:#0f172a;color:#fff;cursor:pointer}
    .btn:hover{filter:brightness(1.05)}
    .btn.gold{background:linear-gradient(180deg,#f4d063,#d99a22);color:#111;font-weight:700;border:0}
    .btn.ghost{background:transparent}
    .btn.small{padding:6px 10px;font-size:14px}
    .btn[disabled]{opacity:.6;cursor:not-allowed}

    .console{background:#0b1220;border:1px solid var(--stroke);padding:12px;border-radius:14px;margin:16px 0}
    .loglist{background:#071018;border:1px solid #0f2034;border-radius:12px;height:220px;overflow:auto;padding:6px}
    .log{margin:6px 0;padding:8px 10px;border-radius:10px;font-size:14px;white-space:pre-wrap}
    .hit{background:#0f2a1a;border:1px solid #1e6e3e}
    .miss{background:#2a0e0e;border:1px solid #6e2323}
    .sys{background:#0c1b2b;border:1px solid #1e3b5e}
    .warn{background:#241d0a;border:1px solid #6b5d1a}

    .list{display:grid;gap:8px}
    .item{display:flex;align-items:center;justify-content:space-between;background:#101319;border:1px solid var(--stroke);padding:10px;border-radius:12px}
    .toggle{appearance:none;width:42px;height:24px;border-radius:999px;background:#253046;position:relative;cursor:pointer;outline:none;border:1px solid #3b455a}
    .toggle:checked{background:#1b7e3a;border-color:#2bbd66}
    .toggle:before{content:"";position:absolute;top:2px;left:2px;width:20px;height:20px;background:#e8f4ff;border-radius:50%;transition:.18s}
    .toggle:checked:before{left:20px}

    input[type="text"], input[type="number"], input[type="url"]{
      background:#0b1220;border:1px solid var(--stroke);color:#e6f0ff;border-radius:10px;padding:10px 12px;outline:none;min-width:180px
    }
    .pill{display:inline-flex;align-items:center;gap:8px;background:#0b1220;border:1px solid var(--stroke);padding:6px 10px;border-radius:999px}
    .muted{color:#8aa}
    .stat{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border:1px solid var(--stroke);border-radius:999px;background:#0b1220}
    .stat b{color:#fff}

    footer{margin:32px 0 12px;text-align:center;color:#8aa;font-size:13px}
    .hr{height:1px;background:linear-gradient(90deg,transparent,#1b2a44,transparent);margin:12px 0}
  </style>
</head>
<body>
<nav>
  <div class="row">
    <a class="brand" href="index.html" title="SC TIPS ‚Ä¢ Home">
      <video src="assets/media/logo-animated.mp4" autoplay muted loop playsinline poster="assets/img/branding/logo-static.png"></video>
      <span>
        <b>SC TIPS</b>
        <small>VIP</small>
      </span>
    </a>
    <div class="menu">
      <a href="index.html">Home</a>
      <a href="estrategias.html">Estrat√©gias</a>
      <a class="active" href="matrix-premium.html" aria-current="page">Matrix Premium</a>
      <a href="puxadores.html">Puxadores Live</a>
      <a href="contato.html">Contato</a>
    </div>
  </div>
</nav>

<div class="wrap">
  <h1>‚ö° Matrix Premium</h1>

  <!-- CONSOLE -->
  <div class="console" role="region" aria-label="Console e Logs">
    <div class="row" style="justify-content:space-between">
      <div class="row">
        <button class="btn" id="btnClear">üßπ Limpar</button>
        <button class="btn" id="btnExport">üìÑ Exportar TXT</button>
        <button class="btn ghost" id="btnSounds">üîä Sons: <span id="sndState">off</span></button>
      </div>
      <div class="row">
        <span class="pill"><input type="checkbox" id="flt-sys" checked> SYS</span>
        <span class="pill"><input type="checkbox" id="flt-hit" checked> HIT</span>
        <span class="pill"><input type="checkbox" id="flt-miss" checked> MISS</span>
        <input id="logFilter" type="text" placeholder="Filtrar logs (ex.: pragmatic, 29, dealer)">
      </div>
    </div>
    <div class="loglist" id="loglist" aria-live="polite"></div>
  </div>

  <div class="grid">
    <!-- STATUS -->
    <section class="card">
      <h3>Status</h3>
      <div class="row" style="margin-bottom:8px">
        <span class="stat">Cad√™ncia: <b id="cadence">18s</b></span>
        <span class="stat">Contagem: <b id="countdown">‚Äî</b></span>
        <span class="stat">√öltima: <b id="last">--</b></span>
        <span class="stat">Rodadas: <b id="rounds">0</b></span>
      </div>
      <div class="row" style="margin-top:6px">
        <button class="btn gold" id="btnStart">‚ñ∂Ô∏è Iniciar</button>
        <button class="btn" id="btnPause">‚è∏Ô∏è Pausar</button>
        <button class="btn" id="btnReset">üîÅ Reset</button>
        <input id="cadInput" type="number" min="5" max="60" step="1" value="18" title="Cad√™ncia (s)">
        <button class="btn small" id="btnCad">‚è±Ô∏è Aplicar</button>
      </div>

      <div class="hr"></div>

      <h2>Conex√£o (WS/API)</h2>
      <div class="row">
        <input id="apiUrl" type="url" placeholder="Cole aqui a URL do WebSocket/API">
        <button class="btn small" id="btnMask">üôà Mascarar</button>
        <button class="btn small" id="btnCopy">üìã Copiar</button>
        <button class="btn small" id="btnConnect">üîå Conectar</button>
        <button class="btn small" id="btnDisconnect" disabled>‚ùå Desconectar</button>
      </div>

      <div class="row" style="margin-top:10px">
        <input id="simNumber" type="number" min="0" max="36" placeholder="Simular n¬∫ (0-36)">
        <button class="btn small" id="btnSim">üéØ Simular</button>
      </div>
    </section>

    <!-- PLATAFORMAS -->
    <section class="card">
      <h3>üé≤ Plataformas</h3>
      <div class="row" id="platforms" role="group" aria-label="Plataformas"></div>
    </section>

    <!-- ESTRAT√âGIAS LIVE ‚Äî 23 PADR√ïES -->
    <section class="card">
      <h3>üéØ Estrat√©gias Live ‚Äî 23 Padr√µes (SCTips)</h3>
      <div class="list" id="strList"></div>
    </section>
  </div>
</div>

<footer>
  ¬© 2025 <b>SC TIPS</b> ‚Äî Todos os direitos reservados.
</footer>

<!-- Sons -->
<audio id="snd-green" src="assets/audio/green.mp3" preload="auto"></audio>
<audio id="snd-red"   src="assets/audio/red.mp3"   preload="auto"></audio>
<audio id="snd-alert" src="assets/audio/alerta.mp3" preload="auto"></audio>
<audio id="snd-click" src="assets/audio/click.mp3"  preload="auto"></audio>

<script>
/* ====== Helpers / Logs ====== */
const $ = s => document.querySelector(s);
const loglist = $("#loglist");
const filters = { sys:true, hit:true, miss:true, text:"" };

function capLogs(max=500){ while(loglist.children.length>max){ loglist.removeChild(loglist.firstChild); } }
function log(msg, cls="sys"){
  if(cls!=="warn" && !filters[cls]) return;
  if(filters.text && !String(msg).toLowerCase().includes(filters.text)) return;
  const d=document.createElement("div");
  d.className="log "+cls;
  d.textContent=`[${new Date().toLocaleTimeString()}] ${msg}`;
  loglist.appendChild(d); loglist.scrollTop=loglist.scrollHeight; capLogs();
}
$("#btnClear").onclick=()=>loglist.innerHTML="";
$("#btnExport").onclick=()=>{ const txt=[...loglist.children].map(x=>x.textContent).join("\n");
  const a=document.createElement("a"); a.href=URL.createObjectURL(new Blob([txt],{type:"text/plain"}));
  a.download="matrix_logs.txt"; a.click(); URL.revokeObjectURL(a.href);
};
$("#flt-sys").onchange=e=>filters.sys=e.target.checked;
$("#flt-hit").onchange=e=>filters.hit=e.target.checked;
$("#flt-miss").onchange=e=>filters.miss=e.target.checked;
$("#logFilter").oninput=e=>filters.text=(e.target.value||"").toLowerCase();

/* ====== Sons ====== */
let soundsOn=false; const sndState=$("#sndState");
$("#btnSounds").onclick=()=>{ soundsOn=!soundsOn; sndState.textContent=soundsOn?"on":"off"; try{$("#snd-click").play().catch(()=>{});}catch(e){} };
function play(id){ if(!soundsOn) return; const el=document.getElementById(id); if(el){ el.currentTime=0; el.play().catch(()=>{});} }

/* ====== Motor 18s anti-drift ====== */
let cadence=18, running=false, rounds=0, nextBeat=0, tickHandle=null;
const elCad=$("#cadence"), elCount=$("#countdown"), elRounds=$("#rounds"), elLast=$("#last");
function scheduleNext(){ const now=performance.now(); const wait=Math.max(0, nextBeat-now); tickHandle=setTimeout(onBeat, wait); }
function onBeat(){ rounds++; elRounds.textContent=String(rounds); nextBeat+=cadence*1000; log("‚è±Ô∏è Tick (nova rodada)","sys"); play("snd-alert"); updateCountdown(); scheduleNext(); }
function updateCountdown(){ if(!running){ elCount.textContent="‚Äî"; return; } const now=performance.now(); const rem=Math.max(0,(nextBeat-now)/1000); elCount.textContent=`${rem.toFixed(1)}s`; requestAnimationFrame(updateCountdown); }
function startMotor(){ if(running) return; running=true; const now=performance.now(); nextBeat=now+cadence*1000; log(`Motor iniciado (cad√™ncia ${cadence}s)`,"sys"); play("snd-click"); scheduleNext(); updateCountdown(); }
function pauseMotor(){ if(!running) return; running=false; clearTimeout(tickHandle); tickHandle=null; log("Motor pausado","sys"); }
function resetMotor(){ pauseMotor(); rounds=0; elRounds.textContent="0"; elCount.textContent="‚Äî"; log("Reset aplicado","sys"); }
$("#btnStart").onclick=startMotor; $("#btnPause").onclick=pauseMotor; $("#btnReset").onclick=resetMotor;
$("#btnCad").onclick=()=>{ const v=parseInt($("#cadInput").value,10); if(Number.isFinite(v)&&v>=5&&v<=60){ cadence=v; elCad.textContent=`${v}s`; if(running){ pauseMotor(); startMotor(); } log(`Cad√™ncia ajustada para ${v}s`,"sys"); } else { log("Valor inv√°lido para cad√™ncia (5‚Äì60)","warn"); } };
document.addEventListener("visibilitychange",()=>{ if(document.hidden && running){ pauseMotor(); log("Aba oculta: motor pausado (higiene)","warn"); }});

/* ====== Plataformas ====== */
const plats=["Donald","BBTips","Lucky","Engine"]; const platBox=$("#platforms");
let activePlatform=localStorage.getItem("mp_active_platform")||"Engine";
function renderPlatforms(){ platBox.innerHTML=""; plats.forEach(p=>{ const b=document.createElement("button");
  b.className="btn"+(p===activePlatform?" gold":""); b.textContent=p;
  b.onclick=()=>{ activePlatform=p; localStorage.setItem("mp_active_platform",p); renderPlatforms(); log("Plataforma ativa: "+p,"sys"); play("snd-click"); };
  platBox.appendChild(b);
});}
renderPlatforms();

/* ====== Estrat√©gias Live ‚Äî 23 Padr√µes (NOMES CORRETOS) ====== */
const STRATS = [
  "Elite 2X",
  "Quarta Dimens√£o",
  "F√≥rmula 5X",
  "Alpha 6",
  "Coluna de Ouro",
  "Tri√¢ngulo Vermelho",
  "Padr√£o Black",
  "Coluna de Prata",
  "Linha dos Finais 6",
  "Tiro Seco SC",
  "Cavalo SC Premium",
  "Cavalos 258",
  "M√∫ltiplos de 3",
  "Diagonais da Roda",
  "Sequ√™ncia 10+4",
  "Duplas Sim√©tricas",
  "Trinca √çmpares",
  "Trinca Pares",
  "Prote√ß√£o Zero",
  "Reverso Recentes",
  "Gap Longo",
  "Espiral da Roda",
  "Terminais 0/5"
];
const strList=$("#strList"); const LS_KEY="mp_strats_enabled";
function loadStr(){ try{return JSON.parse(localStorage.getItem(LS_KEY)||"{}");}catch(_){return{}} }
function saveStr(s){ localStorage.setItem(LS_KEY,JSON.stringify(s||{})); }
const st=loadStr();
(function renderStr(){
  strList.innerHTML="";
  STRATS.forEach((name,i)=>{
    const id=`s_${i}`;
    const div=document.createElement("div");
    div.className="item";
    div.innerHTML=`<div>${name}</div><input id="${id}" type="checkbox" class="toggle">`;
    strList.appendChild(div);
    const cb=div.querySelector("input");
    cb.checked=(st[name] ?? (i<8)); // primeiras 8 ON por padr√£o
    cb.onchange=()=>{ st[name]=cb.checked; saveStr(st); log(`${name}: ${cb.checked?"ON":"OFF"}`,"sys"); play("snd-click"); };
  });
})();

/* ====== Conex√£o WS/API (com m√°scara e reconex√£o opcional) ====== */
const elApi=$("#apiUrl"), elBtnConnect=$("#btnConnect"), elBtnDisconnect=$("#btnDisconnect"), elMask=$("#btnMask"), elCopy=$("#btnCopy");
const WS = { socket:null, url:"", tries:0, dedupe:{lastNumber:null,lastAt:0}, connecting:false };
function sanitizeWsUrl(u){ try{ const url=new URL(u); ["EVOSESSIONID","JSESSIONID","videoToken","token","auth","session","videoSessionId","client_version"].forEach(k=>url.searchParams.delete(k)); return url.origin+url.pathname+(url.search?`?${url.searchParams.toString()}`:""); }catch(_){ return (u||"").replace(/(EVOSESSIONID|JSESSIONID|videoToken|token)=([^&]+)/gi,"$1=‚Ä¢‚Ä¢‚Ä¢"); } }
function setConnUI(connected){ elBtnConnect.disabled=connected; elBtnDisconnect.disabled=!connected; }
function connect(urlRaw){
  if(WS.connecting||WS.socket) return;
  if(!urlRaw){ log("Informe a URL do WS/API para conectar.","warn"); return; }
  WS.url=urlRaw; WS.connecting=true;
  const safe=sanitizeWsUrl(urlRaw); log("üîå Conectando a: "+safe,"sys");
  try{ WS.socket=new WebSocket(urlRaw); }catch(e){ WS.connecting=false; log("‚ö†Ô∏è Falha ao criar WebSocket: "+e.message,"warn"); return; }
  WS.socket.onopen=()=>{ WS.connecting=false; WS.tries=0; setConnUI(true); log("‚úÖ Conectado: "+safe,"sys"); };
  WS.socket.onclose=()=>{ setConnUI(false); if(WS.socket){ try{WS.socket.close()}catch(_){} } WS.socket=null;
    const backoff=[0,1,2,4,8,15]; const wait=backoff[Math.min(WS.tries, backoff.length-1)]*1000;
    log(`‚ùå Desconectado. Reatentando em ${wait/1000}s...`,"warn"); WS.tries++; setTimeout(()=>connect(WS.url), wait);
  };
  WS.socket.onerror=(e)=>log("‚ö†Ô∏è Erro WS (origem/CORS): "+(e?.message||"desconhecido"),"warn");
  WS.socket.onmessage=(ev)=>{
    let data=ev.data; try{ data=JSON.parse(ev.data); }catch(_){}
    handleIncoming(data);
  };
}
function disconnect(){ if(WS.socket){ try{WS.socket.close();}catch(_){} } WS.socket=null; setConnUI(false); log("üîå Conex√£o encerrada por voc√™.","warn"); }
function handleIncoming(payload){
  let n=null, platform=activePlatform;
  if(payload?.type==="roulette.winSpots"){ n=payload?.args?.result?.[0]?.number ?? null; platform="Evolution"; }
  if(n==null && (payload?.type==="spin_result" || payload?.type==="result" || payload?.winningNumber!=null)){ n=payload?.result ?? payload?.winningNumber ?? null; platform="Pragmatic"; }
  if(n==null && typeof payload?.number==="number"){ n=payload.number; }
  if(typeof n!=="number"||n<0||n>36){ log("Msg recebida (sem n¬∫ v√°lido): "+(typeof payload==="string"?payload:JSON.stringify(payload)),"sys"); return; }
  const now=performance.now(); if(WS.dedupe.lastNumber===n && (now-WS.dedupe.lastAt)<1200){ log(`(dedupe) ignorado n¬∫ ${n} duplicado`,"sys"); return; }
  WS.dedupe.lastNumber=n; WS.dedupe.lastAt=now; onNumberRealtime(n, platform, payload);
}
const redSet=new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);
function colorOf(n){ return n===0?"green":(redSet.has(n)?"red":"black"); }
function onNumberRealtime(n, platform){
  elLast.textContent=String(n);
  const col=colorOf(n);
  log(`üéØ N¬∫: ${n} (${col}) ‚Ä¢ ${platform}`,"hit");
  play("snd-green");
  if(running){ const align=0.25; const now=performance.now(); const rem=(nextBeat-now)/1000; if(rem<align || rem>cadence-align){ nextBeat=now+cadence*1000; log("‚õ≠ Resincronizado pela chegada de evento","sys"); } }
}
let masked=false;
elMask.onclick=()=>{ masked=!masked; if(masked){ elApi.dataset.real=elApi.value; if(elApi.value){ try{ const u=new URL(elApi.value); elApi.value=`${u.protocol}//${u.host}/‚Ä¢‚Ä¢‚Ä¢`; }catch(_){ elApi.value="‚Ä¢‚Ä¢‚Ä¢"; } } } else { if(elApi.dataset.real) elApi.value=elApi.dataset.real; } };
elCopy.onclick=()=>{ const v=(masked && elApi.dataset.real)?elApi.dataset.real:elApi.value; navigator.clipboard.writeText(v||"").then(()=>log("URL copiada","sys")); };
$("#btnConnect").onclick=()=>{ const raw=(elApi.dataset.real||elApi.value||"").trim(); if(!raw){ log("Cole a URL do WebSocket/API primeiro.","warn"); return; } connect(raw); };
$("#btnDisconnect").onclick=disconnect;

/* ====== Simulador ====== */
$("#btnSim").onclick=()=>{ const v=parseInt($("#simNumber").value,10); if(Number.isFinite(v)&&v>=0&&v<=36){ handleIncoming({number:v, source:"simulator", at:Date.now()}); }else{ log("Informe um n√∫mero entre 0 e 36","warn"); play("snd-red"); } };

/* ====== Init ====== */
(function init(){ elCad.textContent=`${cadence}s`; })();
</script>
</body>
</html>
