<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SC Tips VIP ‚Ä¢ Estrat√©gias</title>
 <!-- ================== ESTRAT√âGIAS ‚Äî LIVE (PAINEL) ================== -->
<div id="estr-live" class="panel" style="background:#0b1320;border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:16px;margin-bottom:18px">
  <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px">
    <h2 style="margin:0;font-size:22px;font-weight:800">üéØ Estrat√©gias ‚Äî Live</h2>
    <span id="estr-badge" class="pill standby">standby</span>
    <span class="pill">√∫ltima: <b id="estr-ultima">‚Äî</b></span>
    <span class="pill">cad√™ncia: <b id="estr-cad">18s</b></span>
  </div>

  <div style="display:flex;flex-wrap:wrap;gap:10px;margin-bottom:10px">
    <select id="estr-select" class="btn" style="background:#0e1b2e;border:1px solid #1e2a44;border-radius:10px;padding:10px 12px;color:#e6f6ff">
      <option value="Elite 2X">Elite 2X</option>
      <option value="Quarta Dimens√£o">Quarta Dimens√£o</option>
      <option value="F√≥rmula 5X">F√≥rmula 5X</option>
      <option value="Alpha 6">Alpha 6</option>
      <option value="Padr√£o Black">Padr√£o Black</option>
      <option value="Tri√¢ngulo Vermelho">Tri√¢ngulo Vermelho</option>
      <option value="Coluna de Ouro">Coluna de Ouro</option>
      <option value="Coluna de Prata">Coluna de Prata</option>
      <option value="Coluna de Bronze">Coluna de Bronze</option>
      <option value="Prote√ß√£o Zero">Prote√ß√£o Zero</option>
      <option value="Cavalo">Cavalo</option>
      <!-- as demais 23 podem ser adicionadas aqui, o motor aceita qualquer nome -->
    </select>

    <button id="estr-play"  class="btn" style="background:linear-gradient(180deg,#f6c13a,#cfa02a);color:#111;border:1px solid #f6c13a;border-radius:10px;padding:10px 14px;font-weight:700">‚ñ∂ Iniciar</button>
    <button id="estr-pause" class="btn" style="background:#0e1b2e;border:1px solid #1e2a44;border-radius:10px;padding:10px 14px">‚è∏ Pausar</button>
    <button id="estr-reset" class="btn" style="background:#0e1b2e;border:1px solid #1e2a44;border-radius:10px;padding:10px 14px">‚Üª Reset</button>

    <button id="estr-sim"   class="btn" style="margin-left:auto;background:#0e1b2e;border:1px solid #1e2a44;border-radius:10px;padding:10px 14px">üé≤ Simular n√∫mero</button>
  </div>

  <div style="display:flex;flex-wrap:wrap;gap:12px;margin-bottom:10px">
    <label class="pill"><input type="checkbox" id="estr-sync" checked> Sync ao receber n√∫mero</label>
    <label class="pill"><input type="checkbox" id="estr-auto" checked> Auto Mode</label>
  </div>

  <div class="row" style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:10px">
    <div class="pill">Estrat√©gia: <b id="estr-nome">Elite 2X</b></div>
    <div class="pill">Previstos: <b id="estr-prev">‚Äî</b></div>
    <div class="pill">Spins: <b id="estr-spins">0</b></div>
    <div class="pill">Hits: <b id="estr-hits">0</b> ‚Ä¢ Miss: <b id="estr-miss">0</b> ‚Ä¢ Taxa: <b id="estr-taxa">0%</b></div>
  </div>

  <div style="background:#0e1b2e;border:1px solid #1e2a44;border-radius:12px;padding:12px">
    <div style="opacity:.8;margin-bottom:6px">√öltimos n√∫meros (clique para repetir):</div>
    <div id="estr-hist" style="display:flex;gap:8px;flex-wrap:wrap"></div>
  </div>
</div>

<style>
  .pill{background:#0e1b2e;border:1px solid #1e2a44;color:#cfe0ff;border-radius:999px;padding:6px 10px;display:inline-flex;gap:6px;align-items:center}
  .pill.standby{background:#202838;border-color:#334155;color:#cfe0ff}
  .panel .btn{cursor:pointer}
  .estr-badge-num{width:36px;height:36px;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;font-weight:800}
  .estr-num{width:36px;height:36px;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;font-weight:700}
  .estr-red{background:#b91c1c;color:#fff}
  .estr-black{background:#0f172a;color:#cfe0ff}
  .estr-zero{background:#047857;color:#fff}
</style>
<!-- ================== / ESTRAT√âGIAS ‚Äî LIVE (PAINEL) ================== -->

<style>
  .panel{background:#0f172a;border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px}
  .pill{padding:6px 10px;border-radius:999px;border:1px solid #1e2a44;background:#0f1a2e;color:#cfe0ff;font-size:13px}
  .pill.live{background:#063b2e;border-color:#10b981;color:#b7ffdf}
  .pill.standby{background:#202838;border-color:#334155;color:#cfe0ff}
  .btn{padding:10px 14px;border-radius:10px;border:1px solid #1e2a44;background:#0f1a2e;color:#e6f6ff}
  .btn.primary{background:#2563eb}
  .btn:hover{filter:brightness(1.05)}
</style>
<!-- ===== /ESTRAT√âGIAS ‚Ä¢ PAINEL LIVE ===== -->

<style>
  .panel{background:#0f172a;border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px}
  .pill{padding:6px 10px;border-radius:999px;border:1px solid #1e2a44;background:#0f1a2e;color:#cfe0ff;font-size:13px}
  .pill.live{background:#063b2e;border-color:#10b981;color:#b7ffdf}
  .pill.standby{background:#202838;border-color:#334155;color:#cfe0ff}
</style>
  <link rel="icon" type="image/png" href="favicon.png" />
  <style>
    :root{--bg:#050b12;--panel:#0f172a;--text:#e6f6ff;--muted:#93c5fd;--brand:#22d3ee;}
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 "Inter",system-ui,Segoe UI,Roboto,Arial}
    .wrap{max-width:1200px;margin:0 auto;padding:18px}
    /* NAV */
    .nav{position:sticky;top:0;z-index:10;background:#0e1525;border-bottom:1px solid #1e2a44}
    .nav .row{display:flex;align-items:center;justify-content:space-between;gap:14px;padding:12px 20px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;color:#fff}
    .brand img{height:28px;width:auto}
    .brand small{background:#0b1220;border:1px solid #1e2a44;padding:2px 8px;border-radius:999px;color:#22d3ee}
    .menu{display:flex;gap:8px;flex-wrap:wrap}
    .menu a{padding:8px 14px;border:1px solid transparent;border-radius:10px;color:#cfe0ff;transition:.2s;text-decoration:none}
    .menu a:hover{background:rgba(255,255,255,.08)}
    .menu a.active{background:linear-gradient(135deg,#22d3ee,#60a5fa);color:#001428;font-weight:600}
    /* PAGE */
    h1{margin:8px 0 14px 0}
    .header{background:linear-gradient(180deg,#0b1324,#0b1220);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:16px;margin-top:24px}
    .muted{color:var(--muted)}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px;margin-top:16px}
    .card{background:#0f172a;border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px;box-shadow:0 10px 26px rgba(0,0,0,.45)}
    .tag{display:inline-block;font-size:12px;padding:4px 8px;border-radius:999px;background:rgba(34,211,238,.12);border:1px solid #22d3ee;color:#aaf}
    .filters{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    input[type="search"],select{background:#0a0f19;border:1px solid #274162;border-radius:10px;color:#e6f6ff;padding:10px 12px}
    .small{font-size:12px;color:#9cc}
  </style>
</head>
<body>
  <!-- ===== Console Sistema (SC TIPS) ===== -->
<div id="sc-console" class="sc-card">
  <div class="sc-console-header">
    <div class="sc-title">üñ•Ô∏è Console Sistema</div>
    <div class="sc-tools">
      <button class="sc-btn" id="sc-btn-clear">üßπ Limpar</button>
      <button class="sc-btn" id="sc-btn-export">‚¨áÔ∏è Exportar TXT</button>
      <label class="sc-toggle"><input type="checkbox" id="sc-auto" /> Auto.scroll</label>
      <label class="sc-toggle"><input type="checkbox" id="sc-sound" /> Som</label>
      <input id="sc-search" class="sc-input" type="text" placeholder="Pesquisar logs‚Ä¶" />
    </div>
  </div>
  <div id="sc-stream" class="sc-stream"></div>
</div>
<!-- ===== fim Console ===== -->

<style>
  /* estilos do console */
  .sc-card{background:#0b1220;border:1px solid #3b2f0a;border-radius:16px;
           padding:14px;margin:22px 0;box-shadow:inset 0 0 0 1px #171103}
  .sc-console-header{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-bottom:12px}
  .sc-title{font:700 22px/1.2 Inter,system-ui;color:#ffd873;text-shadow:0 0 8px rgba(255,215,115,.25)}
  .sc-tools{display:flex;gap:8px;align-items:center;margin-left:auto}
  .sc-btn{background:#1a1530;border:1px solid #4b3b12;color:#e9f3ff;border-radius:10px;
         padding:8px 12px;cursor:pointer}
  .sc-btn:hover{background:#231a42}
  .sc-toggle{display:inline-flex;gap:6px;align-items:center;color:#d9e3ff;font-size:14px;background:#11182a;
             border:1px solid #2b223f;padding:7px 10px;border-radius:999px}
  .sc-input{background:#0c1324;border:1px solid #24314d;border-radius:10px;padding:8px 10px;color:#e6f6ff;min-width:220px}
  .sc-stream{max-height:360px;overflow:auto;background:linear-gradient(180deg,#0c1018,#0a0f14);
             border:1px solid #0a350a;border-radius:12px;padding:8px 6px}
  .sc-row{display:flex;gap:8px;align-items:center;background:#082b08;border:1px solid #0da10d;
         border-radius:10px;margin:6px;padding:8px 10px;color:#c8ffd0}
  .sc-time{font-family:ui-monospace,Consolas,monospace;color:#90ff97;background:#051d05;border-radius:6px;
           padding:2px 6px;border:1px solid #0a350a}
  .sc-tag{font-weight:700;color:#171103;background:#ffd873;border:1px solid #ffb300;border-radius:10px;
          padding:3px 8px}
  .sc-msg{flex:1}
  .sc-cat{font-family:ui-monospace,monospace;color:#79ff85}
  .sc-STRATEGY{background:#2d260b;border-color:#a98000;color:#ffeab3}
  .sc-PREDICT{background:#2d0b0b;border-color:#a40000;color:#ffc6c6}
  .sc-SYSTEM{background:#0b1f2d;border-color:#1f78a1;color:#c7ecff}
  .sc-ENGINE{background:#0b2d24;border-color:#15a17f;color:#bcfff0}
  .sc-USER{background:#26112f;border-color:#8c2bb8;color:#f0caff}
  .sc-DEMO{background:#272707;border-color:#a3a314;color:#fffec2}
</style>
  <!-- NAV -->
  <div class="nav">
    <div class="row wrap">
      <div class="brand"><img src="logo.png" alt="SC Tips Logo"/><span>SC TIPS</span><small>VIP</small></div>
      <nav class="menu">
        <a href="index.html">Home</a>
        <a href="estrategias.html" class="active">Estrat√©gias</a>
        <a href="matrix-premium.html">Matrix Premium</a>
        <a href="puxadores.html">Puxadores Live</a>
        <a href="contato.html">Contatos</a>
      </nav>
    </div>
  </div>

  <div class="wrap">
    <div class="header">
      <h1>üéØ Estrat√©gias SC TIPS ‚Äî 23 Padr√µes (Atualizadas)</h1>
      <div class="muted">Visual Matrix no estilo preto/dourado. Filtre, pesquise e veja os detalhes corrigidos de cada padr√£o.</div>
      <div class="filters">
        <input id="q" type="search" placeholder="Pesquisar por nome, gatilho, base‚Ä¶" oninput="render()" />
        <select id="viz" onchange="render()">
          <option value="">Vizinhos (todos)</option>
          <option value="0">0 viz.</option><option value="1">1 viz.</option>
          <option value="2">2 viz.</option><option value="3">3 viz.</option>
        </select>
        <button onclick="resetFilters()">Limpar filtros</button>
      </div>
    </div>

    <div id="cards" class="grid"></div>
    <div class="small" style="margin-top:12px">¬© 2025 SC TIPS ‚Äî Cat√°logo informativo.</div>
  </div>

<script>
const ESTRATEGIAS = [
  {id:1,nome:"Elite 2X",gatilho:"Terminal 4 ou 5",base:[2,12,22,32],viz:2,nota:"Cl√°ssico 2X; proteger 2 vizinhos."},
  {id:2,nome:"Quarta Dimens√£o",gatilho:"Terminal 1 ou 3",base:[4,14,24,34],viz:2,nota:"M√∫ltiplos de 10 + 4."},
  {id:3,nome:"F√≥rmula 5X",gatilho:"Terminal 6 ou 8",base:[5,15,25,35],viz:2,nota:"Sequ√™ncia de finais 5."},
  {id:4,nome:"Alpha 6",gatilho:"Terminal 2 ou 9",base:[6,16,26,36],viz:2,nota:"Linha dos finais 6."},
  {id:5,nome:"Padr√£o Black",gatilho:"Sa√≠da de 13, 31 ou 33",base:[13,31,33],viz:2,nota:"Ajuste vizinhos se mesa lenta."},
  {id:6,nome:"Tri√¢ngulo Vermelho",gatilho:"Sa√≠da de 9, 27 ou 30",base:[9,27,30],viz:2,nota:"Comportamento triangular."},
  {id:7,nome:"Coluna de Ouro",gatilho:"Sa√≠da em Coluna 1",base:[1,4,7,10,13,16,19,22,25,28,31,34],viz:1,nota:"Exemplo."},
  {id:8,nome:"Coluna de Prata",gatilho:"Sa√≠da em Coluna 2",base:[2,5,8,11,14,17,20,23,26,29,32,35],viz:1,nota:"Exemplo."},
  {id:9,nome:"Coluna de Bronze",gatilho:"Sa√≠da em Coluna 3",base:[3,6,9,12,15,18,21,24,27,30,33,36],viz:1,nota:"Exemplo."},
  {id:10,nome:"Prote√ß√£o Zero",gatilho:"Zero ausente",base:[0],viz:1,nota:"Cap k=1."},
  {id:11,nome:"Cavalos 258",gatilho:"Padr√£o 2-5-8",base:[2,5,8],viz:1},
  {id:12,nome:"Cavalos 369",gatilho:"Padr√£o 3-6-9",base:[3,6,9],viz:1},
  {id:13,nome:"D√∫zia 1",gatilho:"Fora da 1¬™ d√∫zia",base:[1,2,3,4,5,6,7,8,9,10,11,12],viz:0},
  {id:14,nome:"D√∫zia 2",gatilho:"Fora da 2¬™ d√∫zia",base:[13,14,15,16,17,18,19,20,21,22,23,24],viz:0},
  {id:15,nome:"D√∫zia 3",gatilho:"Fora da 3¬™ d√∫zia",base:[25,26,27,28,29,30,31,32,33,34,35,36],viz:0},
  {id:16,nome:"Vizinhos 1",gatilho:"A partir do √∫ltimo",base:["k=1 do √∫ltimo"],viz:1},
  {id:17,nome:"Vizinhos 2",gatilho:"A partir do √∫ltimo",base:["k=2 do √∫ltimo"],viz:2},
  {id:18,nome:"Repeti√ß√£o",gatilho:"Eco do √∫ltimo",base:["√∫ltimo n¬∫"],viz:0},
  {id:19,nome:"Puxadores",gatilho:"N¬∫s que se puxam",base:["mapeados"],viz:1},
  {id:20,nome:"Pattern Breaker",gatilho:"Sequ√™ncia longa de cor",base:["oposto"],viz:0},
  {id:21,nome:"Hot",gatilho:"Mais frequente",base:["vizinhos do hot"],viz:1},
  {id:22,nome:"Cold",gatilho:"Menos frequente",base:["vizinhos do cold"],viz:2},
  {id:23,nome:"Final Manual",gatilho:"Ativa√ß√£o manual",base:["n¬∫ escolhido"],viz:0},
];
const $=(s)=>document.querySelector(s);
function matchesQuery(it,q){if(!q)return true;const h=(it.nome+' '+it.gatilho+' '+(it.base||[]).join(',')+' '+(it.nota||'')).toLowerCase();return h.includes(q.toLowerCase());}
function matchesViz(it,v){return !v||String(it.viz)===String(v);}
function chip(v){return Array.isArray(v)?v.join(', '):String(v);}
function render(){
  const q=$('#q').value.trim(), v=$('#viz').value, box=$('#cards'); box.innerHTML='';
  const data=ESTRATEGIAS.filter(it=>matchesQuery(it,q)&&matchesViz(it,v));
  if(!data.length){box.innerHTML='<div class="card"><b>Nenhum resultado</b><br><span class="muted">Ajuste os filtros.</span></div>';return;}
  data.forEach(it=>{
    const el=document.createElement('div');el.className='card';
    el.innerHTML=`<div style="display:flex;justify-content:space-between;align-items:center">
      <div><b>${it.id}. ${it.nome}</b></div><span class="tag">${it.viz} viz.</span></div>
      <div style="margin-top:6px"><b>Gatilho:</b> ${it.gatilho}</div>
      <div><b>N√∫meros base:</b> ${chip(it.base)}</div>
      ${it.nota?`<div class="muted" style="margin-top:6px">${it.nota}</div>`:''}`;
    box.appendChild(el);
  });
}
function resetFilters(){$('#q').value='';$('#viz').value='';render();}
render();
</script>
   <!-- sons SC TIPS -->
  <style> ... </style>
  <button id="sndToggle" class="snd-btn">üîä Som ON</button>
  <script> ... </script>
<!-- Sons Globais SC TIPS -->
<audio id="snd-green" src="./sounds/green.mp3" preload="auto"></audio>
<audio id="snd-red" src="./sounds/red.mp3" preload="auto"></audio>
<audio id="snd-alerta" src="./sounds/alerta.mp3" preload="auto"></audio>
<audio id="snd-click" src="./sounds/click.mp3" preload="auto"></audio>

<script>
  // Fun√ß√µes r√°pidas para tocar sons
  function playGreen(){ 
    document.getElementById("snd-green").currentTime = 0;
    document.getElementById("snd-green").play(); 
  }
  function playRed(){ 
    document.getElementById("snd-red").currentTime = 0;
    document.getElementById("snd-red").play(); 
  }
  function playAlerta(){ 
    document.getElementById("snd-alerta").currentTime = 0;
    document.getElementById("snd-alerta").play(); 
  }
  function playClick(){ 
    document.getElementById("snd-click").currentTime = 0;
    document.getElementById("snd-click").play(); 
  }
</script>
  <script>
/* ===== Estrat√©gias ‚Ä¢ Live controls (18s) ===== */
const STR_CAD_MS = 18000;
let str_running   = true;           // come√ßa ligado
let str_lastLive  = 0;
let str_cadStart  = Date.now();
let str_spins = 0, str_hits = 0, str_miss = 0;

const PULLERS = window.PULLERS || {
  0:[10,20,30],1:[17,7],2:[2,22],3:[3,33],4:[21,9],5:[25,15,35],6:[20,17,7],7:[7,17,20],
  8:[30,0,20],9:[9,19],10:[0,20,30],11:[30,0,20],12:[33,15],13:[20,7],14:[17,7],15:[9,5,35],
  16:[3,33],17:[17,20,7],18:[2,22],19:[19,9],20:[17,7],21:[2,22],22:[2,22],23:[0,10],
  24:[35,15,25],25:[20,22],26:[0,10,30],27:[17,7,20],28:[7,17,20],29:[7,17,20],30:[0,20,30],
  31:[9,19],32:[0,10,20,30],33:[3,33],34:[7,20],35:[3,33,15],36:[20,30]
};
const WHEEL = [0,32,15,19,4,21,2,25,17,34,6,27,13,36,11,30,8,23,10,5,24,16,33,1,20,14,31,9,22,18,29,7,28,12,35,3,26];
const isRed = new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);
const inRange = (n)=>Number.isInteger(n)&&n>=0&&n<=36;

let str_base = 17;
let str_viz = 2;
let str_activeSignal = null;

// refs
const $ = (id)=>document.getElementById(id);
const elLast  = $('str-lastAgo'), elLeft=$('str-cadLeft'), elBar=$('str-cadBar'), elBadge=$('str-liveBadge');
const elBase  = $('str-base'), elPux=$('str-pux'), elViz=$('str-viz'), elSpins=$('str-spins'), elHits=$('str-hits'), elMiss=$('str-miss'), elRate=$('str-rate');
const cbSync  = $('str-sync'), cbAuto=$('str-auto');
const bStart  = $('str-btnStart'), bPause=$('str-btnPause'), bReset=$('str-btnReset'), bSim=$('str-btnSim');

// console helpers (seu console j√° deve ter essas globals; se n√£o, tratamos)
const logBus = window.SC_LOG || ((msg,tag='system',ok=true)=>{
  // fallback simples
  console.log(`[${tag}] ${msg}`);
});

// ===== live/standby badge
function setBadge(live){
  elBadge.textContent = live ? 'LIVE' : 'standby';
  elBadge.classList.toggle('live', live);
  elBadge.classList.toggle('standby', !live);
}

// ===== heur√≠stica de vizinhos (dispers√£o)
function autoNeighbors(history){
  const recent = history.slice(-18);
  if (recent.length < 6) return 2;
  let colorSwitch=0, step=0;
  for (let i=1;i<recent.length;i++){
    const a=recent[i-1], b=recent[i];
    if (!inRange(a)||!inRange(b)) continue;
    const ca= a===0?'G':(isRed.has(a)?'R':'B');
    const cb= b===0?'G':(isRed.has(b)?'R':'B');
    if (ca!==cb) colorSwitch++;
    const ia=WHEEL.indexOf(a), ib=WHEEL.indexOf(b);
    const raw=Math.abs(ia-ib); step += Math.min(raw, WHEEL.length-raw);
  }
  const avg = step/Math.max(1,recent.length-1);
  if (avg>=8 || colorSwitch>=10) return 3;
  if (avg>=5 || colorSwitch>=7)  return 2;
  return 1;
}

// ===== quando chega n√∫mero (do feed ou simulado)
function STR_onNumber(n){
  str_lastLive = Date.now();
  str_cadStart = str_lastLive;
  setBadge(true);

  str_spins++; elSpins.textContent = str_spins;

  // sinal ativo bateu?
  if (str_activeSignal){
    const neigh = new Set(getNeighbors(str_activeSignal.base, str_activeSignal.viz));
    const hit = (n===str_activeSignal.base) || neigh.has(n);
    if (hit){ str_hits++; str_activeSignal=null; logBus('‚úî Hit nas vizinhan√ßas/base','PREDICT',true); playGlobal('green'); }
    else if (++str_activeTicks >= 18){ str_miss++; str_activeSignal=null; logBus('‚úñ Miss ap√≥s vig√™ncia','PREDICT',false); playGlobal('red'); }
  }
  elHits.textContent = str_hits; elMiss.textContent = str_miss;
  elRate.textContent = ((str_hits/Math.max(1,(str_hits+str_miss)))*100).toFixed(0)+'%';
}

// vizinhos util
function getNeighbors(number, count){
  if (!inRange(number) || count<=0) return [];
  const idx = WHEEL.indexOf(number);
  if (idx===-1) return [];
  const res=[]; for (let i=1;i<=count;i++){ res.push(WHEEL[(idx-i+WHEEL.length)%WHEEL.length]); res.push(WHEEL[(idx+i)%WHEEL.length]); }
  return res;
}

// ===== motor auto (a cada ciclo decide base/vizinhos e arma um sinal)
let str_activeTicks = 0;
function STR_cycle(history){
  if (!str_running) return;
  const last = history[history.length-1];
  // base candidata: se h√° last, escolha um dos puxadores dele; sen√£o mantenha
  let cand = inRange(last) ? (PULLERS[last]||[])[0] : str_base;
  if (!inRange(cand)) cand = str_base;

  // vizinhos din√¢micos
  if (cbAuto.checked) str_viz = autoNeighbors(history);
  elViz.textContent = str_viz;

  // aplica
  str_base = cand; elBase.textContent = str_base;
  const pux = PULLERS[str_base]||[]; elPux.textContent = pux.join(', ')||'‚Äî';

  // arma sinal (vig√™ncia at√© 18 spins)
  str_activeSignal = { base:str_base, viz:str_viz }; str_activeTicks = 0;
  logBus(`Sinal armado ‚Ä¢ Base ${str_base} ‚Ä¢ ${str_viz} viz. ‚Ä¢ pux ${pux.join(', ')}`,'ENGINE',true);
  playGlobal('alerta');
}

// ===== loop visual cad√™ncia + standby
setInterval(()=>{
  const now = Date.now();

  // ‚Äú√∫ltima‚Äù
  const ago = str_lastLive ? Math.round((now - str_lastLive)/1000) : null;
  elLast.textContent = (ago==null) ? '‚Äî' : (ago+'s');
  setBadge(ago!=null && ago<30);

  // cad√™ncia
  const elapsed = (now - str_cadStart) % STR_CAD_MS;
  const remain  = STR_CAD_MS - elapsed;
  elLeft.textContent = Math.ceil(remain/1000) + 's';
  elBar.style.width = (elapsed/STR_CAD_MS*100) + '%';

  // quando vira o ciclo e Auto Mode ligado ‚Üí dispara an√°lise
  if (cbAuto.checked && elapsed < 900){   // janela de troca
    // use o hist√≥rico global, se existir; sen√£o, mantenha um local simples
    const hist = (window.SC_HISTORY && SC_HISTORY.length) ? SC_HISTORY.slice() : (window._strHist||[]);
    STR_cycle(hist);
  }
}, 200);

// ===== hooks nos bot√µes
bStart.onclick = ()=>{ str_running = true; logBus('Iniciado','system',true); };
bPause.onclick = ()=>{ str_running = false; logBus('Pausado','system',true); };
bReset.onclick = ()=>{
  str_running=true; str_spins=str_hits=str_miss=0;
  elSpins.textContent=0; elHits.textContent=0; elMiss.textContent=0; elRate.textContent='0%';
  str_cadStart = Date.now(); str_activeSignal=null; logBus('Reset','system',true);
};
bSim.onclick = ()=>{
  const n = Math.floor(Math.random()*37);
  // registra em um hist√≥rico local para o auto mode (se n√£o existe global)
  window._strHist = (window._strHist||[]); window._strHist.push(n); if (window._strHist.length>300) window._strHist.shift();
  STR_onNumber(n);
  if (typeof window.handleInbound === 'function'){
    window.handleInbound({ number:n, platform:'Sim' }, 'SIM'); // mant√©m tudo em sincronia
  }
};

// ===== integra ao seu handler real (para Sync ao receber n√∫mero)
(function wrapInbound(){
  const orig = window.handleInbound;
  window.handleInbound = function(payload, via){
    if (typeof orig === 'function') orig(payload, via);
    if (!cbSync.checked) return;
    let n=null;
    if (typeof payload==='number') n=payload;
    else if (payload&&typeof payload==='object'&&Number.isInteger(payload.number)) n=payload.number;
    if (inRange(n)){
      // empilha no hist√≥rico global, se existir, sen√£o local
      if (window.SC_HISTORY) SC_HISTORY.push(n);
      else{ window._strHist = (window._strHist||[]); window._strHist.push(n); if (window._strHist.length>300) window._strHist.shift(); }
      STR_onNumber(n);
    }
  }
})();

// ===== sons/console default: deixa Auto-scroll + Som ligados
document.addEventListener('DOMContentLoaded', ()=>{
  try{
    const chkAuto = document.querySelector('#console-autoscroll input, [data-console="autoscroll"] input');
    const chkSom  = document.querySelector('#console-sound input, [data-console="sound"] input');
    if (chkAuto){ chkAuto.checked = true; if (typeof window.SC_setAutoscroll==='function') SC_setAutoscroll(true); }
    if (chkSom ){ chkSom.checked  = true; if (typeof window.SC_setSound==='function') SC_setSound(true); }
  }catch{}
});

// ===== tocar sons globais (usa os ids do seu /sounds/*.mp3)
function playGlobal(kind){
  try{
    const map = { green:'snd-green', red:'snd-red', alerta:'snd-alerta', click:'snd-click' };
    const el = document.getElementById(map[kind]);
    if (el){ el.currentTime = 0; el.play().catch(()=>{}); }
  }catch{}
}
  </script>
  <script>
(function(){
  "use strict";

  // --- util DOM
  const $ = id => document.getElementById(id);

  // --- elementos
  const elBadge=$('str-badge'), elLast=$('str-last'), elLeft=$('str-left'), elBar=$('str-bar');
  const bStart=$('str-start'), bPause=$('str-pause'), bReset=$('str-reset'), bSim=$('str-sim');
  const cbSync=$('str-sync'), cbAuto=$('str-auto');
  const elBase=$('str-base'), elPux=$('str-pux'), elViz=$('str-viz');
  const elSpins=$('str-spins'), elHits=$('str-hits'), elMiss=$('str-miss'), elRate=$('str-rate');

  // --- constantes
  const CAD_MS = 18000;
  const WHEEL=[0,32,15,19,4,21,2,25,17,34,6,27,13,36,11,30,8,23,10,5,24,16,33,1,20,14,31,9,22,18,29,7,28,12,35,3,26];
  const isRed=new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);
  const inRange=n=>Number.isInteger(n)&&n>=0&&n<=36;

  // --- Puxadores (mesma tabela usada nos outros)
  const PULLERS = window.PULLERS || {
    0:[10,20,30],1:[17,7],2:[2,22],3:[3,33],4:[21,9],5:[25,15,35],6:[20,17,7],7:[7,17,20],
    8:[30,0,20],9:[9,19],10:[0,20,30],11:[30,0,20],12:[33,15],13:[20,7],14:[17,7],15:[9,5,35],
    16:[3,33],17:[17,20,7],18:[2,22],19:[19,9],20:[17,7],21:[2,22],22:[2,22],23:[0,10],
    24:[35,15,25],25:[20,22],26:[0,10,30],27:[17,7,20],28:[7,17,20],29:[7,17,20],30:[0,20,30],
    31:[9,19],32:[0,10,20,30],33:[3,33],34:[7,20],35:[3,33,15],36:[20,30]
  };

  // --- estado
  let running = true;            // come√ßa ligado
  let cadStart = Date.now();
  let lastLiveAt = 0;
  let spins=0,hits=0,miss=0;
  let base=17, viz=2;
  let activeSignal = null, ticks=0;

  // hist√≥ricos
  const H = { local: [] }; // fallback se n√£o houver SC_HISTORY

  // --- console/som helpers (usam seu console se existir)
  const LOG = (msg, tag='system', ok=true)=>{
    if (typeof window.SC_LOG === 'function') return window.SC_LOG(msg, tag, ok);
    // fallback simples:
    console.log(`[${tag}] ${msg}`);
  };
  const play = (kind)=>{
    const map={green:'snd-green', red:'snd-red', alerta:'snd-alerta', click:'snd-click'};
    const el=document.getElementById(map[kind]); if (el){ try{ el.currentTime=0; el.play(); }catch{} }
  };

  // --- UI helpers
  function setBadge(live){
    elBadge.textContent = live ? 'LIVE' : 'standby';
    elBadge.classList.toggle('live', live);
    elBadge.classList.toggle('standby', !live);
  }
  function uiStats(){
    elSpins.textContent=spins;
    elHits.textContent=hits;
    elMiss.textContent=miss;
    elRate.textContent=((hits/Math.max(1,hits+miss))*100).toFixed(0)+'%';
    elBase.textContent=base;
    elViz.textContent=viz;
    elPux.textContent=(PULLERS[base]||[]).join(', ')||'‚Äî';
  }

  // --- vizinhos
  function neighbors(n,c){
    if (!inRange(n)||c<=0) return [];
    const i=WHEEL.indexOf(n); if (i<0) return [];
    const out=[]; for(let k=1;k<=c;k++){ out.push(WHEEL[(i-k+WHEEL.length)%WHEEL.length]); out.push(WHEEL[(i+k)%WHEEL.length]); }
    return out;
  }
  function autoNeighbors(history){
    const recent=history.slice(-18); if (recent.length<6) return 2;
    let colorSwitch=0, step=0;
    for(let i=1;i<recent.length;i++){
      const a=recent[i-1], b=recent[i];
      if(!inRange(a)||!inRange(b)) continue;
      const ca=a===0?'G':(isRed.has(a)?'R':'B'); const cb=b===0?'G':(isRed.has(b)?'R':'B');
      if(ca!==cb) colorSwitch++;
      const ia=WHEEL.indexOf(a), ib=WHEEL.indexOf(b);
      const raw=Math.abs(ia-ib); step += Math.min(raw, WHEEL.length-raw);
    }
    const avg=step/Math.max(1,recent.length-1);
    if (avg>=8 || colorSwitch>=10) return 3;
    if (avg>=5 || colorSwitch>=7)  return 2;
    return 1;
  }

  // --- ciclo autom√°tico (a cada virada de 18s)
  function onCycle(){
    if (!running) return;
    const hist = (window.SC_HISTORY && SC_HISTORY.length) ? SC_HISTORY.slice() : H.local.slice();
    const last = hist[hist.length-1];
    // base candidata: 1¬∫ puxador do √∫ltimo n√∫mero; fallback mant√©m base
    const cand = inRange(last) && (PULLERS[last]||[])[0] || base;
    base = inRange(cand) ? cand : base;
    if (cbAuto.checked) viz = autoNeighbors(hist);
    activeSignal = { base, viz }; ticks=0;
    uiStats();
    LOG(`Sinal armado ‚Ä¢ Base ${base} ‚Ä¢ ${viz} viz. ‚Ä¢ pux ${ (PULLERS[base]||[]).join(', ') }`,'ENGINE',true);
    play('alerta');
  }

  // --- chegada de n√∫mero
  function onNumber(n){
    lastLiveAt = Date.now(); cadStart = lastLiveAt;
    setBadge(true);
    spins++; uiStats();

    if (activeSignal){
      const hit = (n===activeSignal.base) || (new Set(neighbors(activeSignal.base, activeSignal.viz))).has(n);
      if (hit){ activeSignal=null; hits++; uiStats(); LOG(`‚úî Hit: n¬∫ ${n} nas vizinhan√ßas/base`,'PREDICT',true); play('green'); }
      else if (++ticks >= 18){ activeSignal=null; miss++; uiStats(); LOG(`‚úñ Miss (vig√™ncia expirada)`,'PREDICT',false); play('red'); }
    }
  }

  // --- integra ao handler real (se existir)
  (function wrapInbound(){
    const orig = window.handleInbound;
    window.handleInbound = function(payload, via){
      if (typeof orig === 'function') orig(payload, via);
      if (!cbSync.checked) return;
      let n=null;
      if (typeof payload==='number') n=payload;
      else if (payload && typeof payload==='object' && inRange(payload.number)) n=payload.number;
      if (inRange(n)){
        if (window.SC_HISTORY) SC_HISTORY.push(n);
        else { H.local.push(n); if (H.local.length>300) H.local.shift(); }
        onNumber(n);
      }
    };
  })();

  // --- anima√ß√£o cad√™ncia + √∫ltima + troca de ciclo
  function tick(){
    const now=Date.now();
    // √∫ltima
    const ago = lastLiveAt ? Math.round((now-lastLiveAt)/1000) : null;
    elLast.textContent = (ago==null)?'‚Äî':(ago+'s');
    setBadge(ago!=null && ago<30);

    // cad√™ncia
    const elapsed = (now - cadStart) % CAD_MS;
    const remain  = CAD_MS - elapsed;
    elLeft.textContent = Math.ceil(remain/1000)+'s';
    elBar.style.width = (elapsed/CAD_MS*100)+'%';

    // se acabou de virar o ciclo, dispara an√°lise
    if (elapsed < 120){ onCycle(); }
    requestAnimationFrame(tick);
  }

  // --- bot√µes
  bStart.addEventListener('click', ()=>{ running=true; LOG('Iniciado','system',true); });
  bPause.addEventListener('click', ()=>{ running=false; LOG('Pausado','system',true); });
  bReset.addEventListener('click', ()=>{
    running=true; spins=hits=miss=0; uiStats();
    activeSignal=null; ticks=0; cadStart=Date.now(); LOG('Reset','system',true);
  });
  bSim.addEventListener('click', ()=>{
    const n=Math.floor(Math.random()*37);
    H.local.push(n); if (H.local.length>300) H.local.shift();
    onNumber(n);
    if (typeof window.SC_LOG==='function') LOG(`N√∫mero ${n} (sim)`,'DEMO',true);
  });

  // --- liga Auto-scroll + Som do Console (se existir)
  document.addEventListener('DOMContentLoaded', ()=>{
    try{
      const as = document.querySelector('#console-autoscroll input, [data-console="autoscroll"] input');
      const so = document.querySelector('#console-sound input, [data-console="sound"] input');
      if (as){ as.checked=true; if (typeof window.SC_setAutoscroll==='function') SC_setAutoscroll(true); }
      if (so){ so.checked=true; if (typeof window.SC_setSound==='function') SC_setSound(true); }
    }catch{}
    uiStats();
    tick();  // inicia o loop
  });

})();
  </script>
</body>
  <audio id="snd-green"  src="./sounds/green.mp3"  preload="auto"></audio>
<audio id="snd-red"    src="./sounds/red.mp3"    preload="auto"></audio>
<audio id="snd-alerta" src="./sounds/alerta.mp3" preload="auto"></audio>
<audio id="snd-click"  src="./sounds/click.mp3"  preload="auto"></audio>
</html>
